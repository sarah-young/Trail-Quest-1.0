{% extends 'base.html' %}
{% block title %}
Homepage
{% endblock %}

{% block content %}

	<h2></h2>
	<h4>Let's get trekkin'. Fill out the boxes below to start.</h4>
	<form action='/trail_selector' id="trailSelector">
		
		<i><h4>Find trails near...</h4></i>
		City:<br>
	    	<input type="text" name="city" required><br>
	  
	    State:<br>
	    	<input type="text" name="state" required><br>
	  
	    Distance from <span id="city" name=></span> <span id="state"></span>:<br>
	    <i>(defaults to 25 miles if not selected)</i><br>
	    <div class="slidecontainer">	
	 	 		<input type="range" min="1" max="25" value="5" class="slider" id="radius-selection" name="radius">
	 	 		<span id="radius"></span>
			</div>



	    Trail length:<br>
	    <i>(in miles)</i><br>
		    <div class="slidecontainer">	
	 	 		<input type="range" min="1" max="30" value="15" class="slider" id="trek_length_selection" name="trek_length">
	 	 		<span id="trek_length"></span>
			</div>

			
	    Difficulty rating:
		    <select name="trail_difficulty">
			  <option value="no-preference">No preference</option>
			  <option value="easy">Easy</option>
			  <option value="moderate">Moderate</option>
			  <option value="difficult">Difficult</option>
			</select><br>

	    	<input type="submit">
	    	<br><br><br>
	</form>

	<button type="button" id="asynchrousClick">Click Me!</button>

	<div id="trails">

	</div>








	<script>

	//Creating asynchronous call for form #yay
	document.getElementById("asynchrousClick").addEventListener("click", function() {
		let formData = new FormData(document.getElementById('trailSelector'));
		console.log(formData);
		$.ajax({
			url: "/trails_asychronous",
			type: "GET",
			data: formData,
			processData: false,
			success: function(response){
				var k=response;
				console.log(`Response: `, response)
				let trailDetails, trailName, trailPicture, trailLength, trailDifficulty;

				for (let i = 0; i < k.length; i += 1) {
			    	trailName = k[i].name
			    	console.log(trailName);
			    	trailDetails = k[i].summary
			    	console.log(trailDetails);
			    	trailPicture = k[i].imgSmall
			    	console.log(trailPicture);
			    	trailLength = k[i].length
			    	console.log(trailLength);
			    	trailDifficulty = k[i].difficulty
			    	console.log(trailDifficulty);
			    	};
				}
			})
    	});






	

	





	// document.getElementById("trails").innerHTML = ;

// Next steps: changing innerHTML in divs by ID to display information
// #maybeIdonthatejavascript???







	</script>

			<script src='../static/homepage.js' type="text/javascript">					
			</script>

{% endblock %}	